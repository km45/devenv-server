---
- name: verify
  hosts: all
  tasks:
    - name: assert test environment
      block:
        - name: determine remote user
          command: whoami
          register: result
          changed_when: False
        - name: assert remote user
          assert:
            that:
              - result.stdout == "vagrant"
    - name: test command existence
      command: bash -c ". /home/vagrant/.bashrc.d/rust.bashrc && type {{ item }}"
      register: result
      changed_when: False
      with_items:
        - cargo
        - rustc
        - rustup
